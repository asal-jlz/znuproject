<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ø±ØªØ§Ù„ Ø¬Ø§Ù…Ø¹ Ú©Ù†ÙØ±Ø§Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ø¹Ù„Ù…ÛŒ | Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø²Ù†Ø¬Ø§Ù†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;400;700&display=swap');
        body { font-family: 'Vazirmatn', sans-serif; scroll-behavior: smooth; }
        .sidebar-sticky { position: sticky; top: 5rem; }
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÙˆÙ„â€ŒØ¨Ø§Ø± Ú†Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ */
        #chat-messages::-webkit-scrollbar { width: 4px; }
        #chat-messages::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="bg-blue-900 text-white py-2 px-4 text-[10px] md:text-xs">
        <div class="container mx-auto flex justify-between items-center">
            <div>Ø¯Ø¨ÛŒØ±Ø®Ø§Ù†Ù‡ Ø¯Ø§Ø¦Ù…ÛŒ Ú©Ù†ÙØ±Ø§Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø²Ù†Ø¬Ø§Ù†</div>
            <div dir="ltr">{% now "l, F d, Y" %}</div>
        </div>
    </div>

    <header class="bg-white shadow-sm border-b sticky top-0 z-50">
        <div class="container mx-auto p-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <button class="md:hidden text-2xl" onclick="toggleMobileMenu()">â˜°</button>
                <div class="flex flex-col">
                    <h1 class="text-xl font-black text-blue-900 leading-none">ZNU-ICEE 2026</h1>
                    <span class="text-[9px] text-gray-400 font-bold uppercase">Conference Portal</span>
                </div>
            </div>
        
            <nav id="nav-menu" class="hidden md:flex gap-6 text-sm font-bold">
                <a href="{% url 'home' %}" class="hover:text-blue-700 transition">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
                <a href="{% url 'scientific_committee' %}" class="hover:text-blue-700 transition">Ú©Ù…ÛŒØªÙ‡ Ø¹Ù„Ù…ÛŒ</a>
                <a href="{% url 'contact_us' %}" class="hover:text-blue-700 transition">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a>
            </nav>
    
            <div class="flex items-center gap-4">
                {% if user.is_authenticated %}
                    <div class="flex items-center gap-2">
                        <span class="text-[10px] text-gray-500 hidden lg:inline">{{ user.username }}</span>
                        <a href="{% url 'dashboard' %}" class="bg-blue-800 text-white px-4 py-2 rounded-lg text-[10px] font-bold shadow-md hover:bg-blue-900 transition">Ù¾Ù†Ù„ Ù…Ù†</a>
                        <form action="{% url 'logout' %}" method="post" class="m-0">
                            {% csrf_token %}
                            <button type="submit" class="bg-gray-100 text-gray-600 px-3 py-2 rounded-lg text-[10px] font-bold hover:bg-red-50 hover:text-red-600 transition">Ø®Ø±ÙˆØ¬</button>
                        </form>
                    </div>
                {% else %}
                    <a href="{% url 'login' %}" class="bg-blue-900 text-white px-6 py-2 rounded-lg text-xs font-bold hover:bg-blue-800 transition shadow-md">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡</a>
                {% endif %}
            </div>
        </div>
    </header>

    <div class="container mx-auto my-8 px-4 flex flex-wrap lg:flex-nowrap gap-8">
        
        <aside class="w-full lg:w-1/4 space-y-6">
            
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4">
                <h3 class="text-xs font-bold text-gray-700 mb-3 flex items-center gap-2">ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø§ÛŒØª</h3>
                <form action="{% url 'global_search' %}" method="get" class="relative">
                    <input type="text" name="q" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ø®Ø¨Ø±ØŒ Ù…Ù‚Ø§Ù„Ù‡ØŒ Ù…Ø­ÙˆØ±..." class="w-full p-2.5 pr-9 text-[10px] border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all bg-gray-50">
                    <button type="submit" class="absolute right-3 top-2.5 text-gray-400">ğŸ”</button>
                </form>
            </div>

            <div class="bg-gradient-to-br from-blue-900 to-indigo-900 rounded-2xl shadow-lg p-5 text-white">
                <h3 class="text-center text-[10px] font-bold mb-4 border-b border-blue-700 pb-2 opacity-80">â³ Ù…Ù‡Ù„Øª Ø§Ø±Ø³Ø§Ù„ Ù…Ù‚Ø§Ù„Ø§Øª</h3>
                <div id="countdown" class="flex justify-between items-center px-2">
                    <div class="text-center"><span id="days" class="text-xl font-black block">00</span><span class="text-[8px] opacity-60">Ø±ÙˆØ²</span></div>
                    <div class="text-lg opacity-30">:</div>
                    <div class="text-center"><span id="hours" class="text-xl font-black block">00</span><span class="text-[8px] opacity-60">Ø³Ø§Ø¹Øª</span></div>
                    <div class="text-lg opacity-30">:</div>
                    <div class="text-center"><span id="minutes" class="text-xl font-black block">00</span><span class="text-[8px] opacity-60">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="bg-red-600 p-3 text-white text-xs font-bold text-center">ğŸ—“ ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù…</div>
                <div class="p-4 space-y-3">
                    <div class="flex justify-between items-center border-b border-gray-50 pb-2">
                        <span class="text-[10px] text-gray-400">Ø§Ø±Ø³Ø§Ù„ Ù…Ù‚Ø§Ù„Ø§Øª:</span>
                        <span class="text-xs font-bold text-red-600">{{ conference.submission_deadline|date:"Y/m/d"|default:"----/--/--" }}</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-gray-50 pb-2">
                        <span class="text-[10px] text-gray-400">Ø§Ø¹Ù„Ø§Ù… Ù†ØªØ§ÛŒØ¬:</span>
                        <span class="text-xs font-bold text-gray-700">{{ conference.acceptance_notification|date:"Y/m/d"|default:"----/--/--" }}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-[10px] text-gray-400">Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ:</span>
                        <span class="text-xs font-bold text-gray-700">{{ conference.hold_date|date:"Y/m/d"|default:"----/--/--" }}</span>
                    </div>
                </div>
            </div>

            <div class="bg-white p-2 rounded-2xl shadow-sm border border-gray-100">
                <p class="text-[10px] font-bold text-center text-gray-400 mb-2">OFFICIAL POSTER</p>
                <img src="https://via.placeholder.com/300x420" class="w-full h-auto rounded-xl hover:brightness-110 transition cursor-pointer" alt="Poster">
            </div>

            <div class="bg-white rounded-2xl border border-gray-100 p-4 text-center shadow-sm">
                <h3 class="text-[9px] font-black text-gray-400 mb-4 tracking-widest">STATISTICS</h3>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-gray-50 p-2 rounded-lg border border-gray-100">
                        <span class="block font-black text-blue-900 text-sm">Û±,Û²Û´Û°</span>
                        <span class="text-[8px] text-gray-400">Ø§Ù…Ø±ÙˆØ²</span>
                    </div>
                    <div class="bg-gray-50 p-2 rounded-lg border border-gray-100">
                        <span class="block font-black text-blue-900 text-sm">Û±Ûµ,Û´Û²Û°</span>
                        <span class="text-[8px] text-gray-400">Ú©Ù„ Ø¨Ø§Ø²Ø¯ÛŒØ¯</span>
                    </div>
                </div>
            </div>
        </aside>

        <main class="w-full lg:w-3/4">
            {% block content %}
            {% endblock %}
        </main>
    </div>

    <footer class="bg-gray-900 text-gray-400 mt-20 pt-16 pb-8 border-t-4 border-blue-900">
        <div class="container mx-auto px-4 text-right">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                <div>
                    <h4 class="text-white font-bold mb-6">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú©Ù†ÙØ±Ø§Ù†Ø³</h4>
                    <p class="text-[11px] leading-7 italic text-gray-500">Ø§ÛŒÙ† Ú©Ù†ÙØ±Ø§Ù†Ø³ Ø¨Ø³ØªØ±ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø§Ø¯Ù„ ÛŒØ§ÙØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù†ÙˆÛŒÙ† Ø¯Ø± Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ø¨Ø±Ù‚ Ùˆ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹</h4>
                    <ul class="text-[11px] space-y-3">
                        <li><a href="{% url 'home' %}#topics" class="hover:text-blue-400 transition">ğŸ¯ Ù…Ø­ÙˆØ±Ù‡Ø§ÛŒ ØªØ®ØµØµÛŒ</a></li>
                        <li><a href="{% url 'home' %}#faq" class="hover:text-blue-400 transition">â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h4>
                    <div class="text-[11px] space-y-2 leading-6">
                        <p>ğŸ“ Ø²Ù†Ø¬Ø§Ù†ØŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø²Ù†Ø¬Ø§Ù†ØŒ Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡ Ù…Ù‡Ù†Ø¯Ø³ÛŒ</p>
                        <p dir="ltr">ğŸ“ +98 24 3305 1234</p>
                    </div>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">Ù†Ù‚Ø´Ù‡ Ù…Ø­Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ</h4>
                    <div class="rounded-xl overflow-hidden grayscale opacity-60 hover:opacity-100 transition h-32 bg-gray-800">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3183.33!2d48.3!3d36.7!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzbCsDQyJzAwLjAiTiA0OMKwMTgnMDAuMCJF!5e0!3m2!1sen!2sir!4v1620000000000!5m2!1sen!2sir" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-[9px]">
                <p>Â© 2026 ZNU-ICEE | ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø²Ù†Ø¬Ø§Ù† Ø§Ø³Øª</p>
            </div>
        </div>
    </footer>

    <div class="fixed bottom-6 left-6 z-[100]">
        <button onclick="toggleAIChat()" class="bg-blue-600 text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-all border-4 border-white">
            <span class="text-2xl">ğŸ¤–</span>
        </button>
        
        <div id="ai-chat-window" class="hidden absolute bottom-20 left-0 w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden flex flex-col transition-all">
            <div class="bg-blue-900 p-4 text-white flex justify-between items-center">
                <span class="text-xs font-bold">Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ZNU-ICEE</span>
                <button onclick="toggleAIChat()" class="text-lg">Ã—</button>
            </div>
            <div id="chat-messages" class="h-64 p-4 overflow-y-auto text-[11px] space-y-4 bg-gray-50">
                <div class="bg-blue-100 p-3 rounded-2xl rounded-tr-none ml-8 text-blue-900 shadow-sm">
                    Ø³Ù„Ø§Ù…! Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©Ù†ÙØ±Ø§Ù†Ø³ Ù‡Ø³ØªÙ…. Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø¨Ù‡Øª Ú©Ù…Ú© Ú©Ù†Ù…ØŸ
                </div>
            </div>
            <div class="p-3 bg-white border-t flex gap-2">
                <input id="ai-input" type="text" placeholder="Ø³ÙˆØ§Ù„Øª Ø±Ùˆ Ø¨Ù¾Ø±Ø³..." class="flex-1 text-[10px] p-2 border rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500">
                <button onclick="sendToAI()" class="bg-blue-600 text-white px-3 py-1 rounded-lg text-[10px] font-bold">Ø§Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        // Û±. Ú©Ù†ØªØ±Ù„ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
        function toggleMobileMenu() {
            document.getElementById('nav-menu').classList.toggle('hidden');
        }

        // Û². Ú©Ù†ØªØ±Ù„ Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯
        function toggleAIChat() {
            document.getElementById('ai-chat-window').classList.toggle('hidden');
        }

        // Û³. Ø´Ù…Ø§Ø±Ø´ Ù…Ø¹Ú©ÙˆØ³
        const deadlineStr = "{{ conference.submission_deadline|date:'Y-m-d' }}";
        if (deadlineStr) {
            const countDate = new Date(deadlineStr).getTime();
            setInterval(function() {
                const now = new Date().getTime();
                const gap = countDate - now;
                const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;
                if (gap > 0) {
                    document.getElementById('days').innerText = Math.floor(gap / day);
                    document.getElementById('hours').innerText = Math.floor((gap % day) / hour);
                    document.getElementById('minutes').innerText = Math.floor((gap % hour) / minute);
                }
            }, 1000);
        }

        // Û´. ØªØ§Ø¨Ø¹ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… (ÙØ¹Ù„Ø§Ù‹ Ù†Ù…Ø§ÛŒØ´ÛŒ)
        async function sendToAI() {
          const input = document.getElementById('ai-input');
         const messages = document.getElementById('chat-messages');
         const text = input.value.trim();
    
        if (text !== "") {
        // Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±
             messages.innerHTML += `<div class="bg-white p-3 rounded-2xl rounded-tl-none mr-8 text-gray-700 shadow-sm border border-gray-100">${text}</div>`;
             input.value = "";
        
        // Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø² Ø³Ø±ÙˆØ±
             const response = await fetch(`/ai-assistant/?msg=${text}`);
             const data = await response.json();
        
        // Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
             messages.innerHTML += `<div class="bg-blue-100 p-3 rounded-2xl rounded-tr-none ml-8 text-blue-900 shadow-sm">${data.reply}</div>`;
             messages.scrollTop = messages.scrollHeight;
    }
}
    </script>
</body>
</html>